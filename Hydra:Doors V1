--// Load Library from URL
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/bocaj111004/Linora/refs/heads/main/Library.lua"))()
if not Library or not Library.CreateWindow then
    warn("Failed to load Linoria Library")
    return
end

--// Create Window
local Window = Library:CreateWindow({
    Title = "Hydra",
    Center = true,
    AutoShow = true,
})

--// Tabs
local MainTab = Window:AddTab("Main")
local ExploitsTab = Window:AddTab("Exploits")
local VisualsTab = Window:AddTab("Visuals")
local FloorTab = Window:AddTab("Floor")
local UITab = Window:AddTab("UI")
local SettingsTab = Window:AddTab("Settings")
local CreditsTab = Window:AddTab("Credits")

--// Main Tab Groups (columns inside Main tab)
local PlayerGroup = MainTab:AddLeftGroupbox("Player")
local AutomationGroup = MainTab:AddRightGroupbox("Automation")
local ReachGroup = MainTab:AddLeftGroupbox("Reach")
local MiscGroup = MainTab:AddRightGroupbox("Misc")

-- Speed Hack variables and connections
local HumanModCons = {
    wsLoop = nil,
    wsCA = nil
}

local function isNumber(val)
    return tonumber(val) ~= nil
end

local speedHackEnabled = false
local speedValue = 16

-- Speed Hack Button (toggles on/off)
PlayerGroup:AddToggle("SpeedHackToggle", {
    Text = "Enable Speed Hack",
    Default = false,
    Callback = function(value)
        speedHackEnabled = value
        local Player = game:GetService("Players").LocalPlayer

        if value then
            local Char = Player.Character or Player.CharacterAdded:Wait()
            local Human = Char:FindFirstChildOfClass("Humanoid")

            if Human then
                local function WalkSpeedChange()
                    if Char and Human then
                        Human.WalkSpeed = speedValue
                    end
                end

                WalkSpeedChange()

                if HumanModCons.wsLoop then HumanModCons.wsLoop:Disconnect() end
                if HumanModCons.wsCA then HumanModCons.wsCA:Disconnect() end

                HumanModCons.wsLoop = Human:GetPropertyChangedSignal("WalkSpeed"):Connect(WalkSpeedChange)
                HumanModCons.wsCA = Player.CharacterAdded:Connect(function(newChar)
                    Char = newChar
                    Human = newChar:WaitForChild("Humanoid")
                    WalkSpeedChange()
                    if HumanModCons.wsLoop then HumanModCons.wsLoop:Disconnect() end
                    HumanModCons.wsLoop = Human:GetPropertyChangedSignal("WalkSpeed"):Connect(WalkSpeedChange)
                end)
            end
        else
            if HumanModCons.wsLoop then HumanModCons.wsLoop:Disconnect() HumanModCons.wsLoop = nil end
            if HumanModCons.wsCA then HumanModCons.wsCA:Disconnect() HumanModCons.wsCA = nil end
            local Char = Player.Character
            local Human = Char and Char:FindFirstChildOfClass("Humanoid")
            if Human then
                Human.WalkSpeed = 16 -- default Roblox walk speed
            end
        end
    end
})

-- Speed Hack Slider (adjusts speedValue)
PlayerGroup:AddSlider("SpeedHackSlider", {
    Text = "Speed Hack Speed",
    Default = 16,
    Min = 16,
    Max = 100,
    Rounding = 1,
    Callback = function(value)
        speedValue = value
        if speedHackEnabled then
            local Player = game:GetService("Players").LocalPlayer
            local Char = Player.Character
            local Human = Char and Char:FindFirstChildOfClass("Humanoid")
            if Human then
                Human.WalkSpeed = speedValue
            end
        end
    end
})

-- Example Automation group UI (you can add your own here)
AutomationGroup:AddButton({
    Text = "Start Auto Farm",
    Callback = function()
        print("Auto Farm started!")
        -- Add your automation logic here
    end,
})

-- Example Reach group UI
ReachGroup:AddSlider("ReachDistance", {
    Text = "Reach Distance",
    Default = 10,
    Min = 1,
    Max = 50,
    Rounding = 1,
    Callback = function(value)
        print("Reach Distance set to:", value)
        -- Add your reach adjustment code here
    end,
})

-- Example Misc group UI
MiscGroup:AddToggle("ESP", {
    Text = "Enable ESP",
    Default = false,
    Callback = function(value)
        print("ESP toggled:", value)
        -- Add your ESP code here
    end,
})

--// Speed Bypasser Setup
local Player = game:GetService('Players').LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()

local Collision = Character:WaitForChild("Collision", 9e9)
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart", 9e9)

-- Remove any existing clones just in case
local existingClone = Character:FindFirstChild("ClonedCollision")
if existingClone then
    existingClone:Destroy()
end

local CollisionClone = Collision:Clone()
CollisionClone.Name = "ClonedCollision"
CollisionClone.Parent = Character
CollisionClone.CanCollide = false
CollisionClone.Massless = true

if CollisionClone:FindFirstChild("CollisionCrouch") then
    CollisionClone.CollisionCrouch:Destroy()
end

Player.CharacterAdded:Connect(function(NewCharacter)
    -- Cleanup old clone if exists
    local oldClone = NewCharacter:FindFirstChild("ClonedCollision")
    if oldClone then
        oldClone:Destroy()
    end

    Collision = NewCharacter:WaitForChild("Collision", 9e9)
    HumanoidRootPart = NewCharacter:WaitForChild("HumanoidRootPart", 9e9)

    CollisionClone = Collision:Clone()
    CollisionClone.Name = "ClonedCollision"
    CollisionClone.Parent = NewCharacter
    CollisionClone.CanCollide = false
    CollisionClone.Massless = true
    if CollisionClone:FindFirstChild("CollisionCrouch") then
        CollisionClone.CollisionCrouch:Destroy()
    end

    Character = NewCharacter
end)

getgenv().SpeedBypass = false

--// UI Toggle inside Exploits tab
ExploitsTab:AddToggle("SpeedBypass", {
    Text = "Enable Speed Bypass",
    Default = false,
    Callback = function(Value)
        getgenv().SpeedBypass = Value
    end
})

--// Initialize UI
Library:Init()

--// Main Loop to toggle Massless on the cloned collision
task.spawn(function()
    while task.wait(0.22) do
        if getgenv().SpeedBypass and CollisionClone and Player.Character then
            local hrp = Player.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                if not hrp.Anchored then
                    CollisionClone.Massless = false
                else
                    CollisionClone.Massless = true
                end
            end
        elseif CollisionClone then
            CollisionClone.Massless = true
        end
    end
end)
